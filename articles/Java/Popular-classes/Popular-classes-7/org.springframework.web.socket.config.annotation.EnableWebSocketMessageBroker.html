<!doctype html>
<html lang="en"> 
 <head> 
  <title>jvmExamples.com - org.springframework.web.socket.config.annotation.EnableWebSocketMessageBroker</title> <!--timestamp=2025-04-30T00:18:31.580610290Z--> 
  <meta charset="UTF-8"> 
  <meta name="viewport" content="width=device-width, initial-scale=1.0"> 
  <link rel="stylesheet" type="text/css" href="/css/style.css"> 
  <link rel="stylesheet" type="text/css" href="/css/bootstrap.min.css"> 
  <script src="/js/bootstrap.bundle.min.js"></script> 
  <script src="/js/jquery.min.js"></script> 
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"> 
  <script src="/js/prism.js"></script> 
  <link rel="stylesheet" type="text/css" href="/css/prism.css"> 
  <meta name="description" content="org.springframework.web.socket.config.annotation.EnableWebSocketMessageBroker"> 
  <meta name="keywords" content="org.springframework.web.socket.config.annotation.EnableWebSocketMessageBroker"> 
  <meta name="robots" content="index, follow"> <!-- facebook --> 
  <meta property="og:url" content="https://jvmexamples.com"> 
  <meta property="og:type" content="website"> 
  <meta property="og:title" content="jvmExamples.com - org.springframework.web.socket.config.annotation.EnableWebSocketMessageBroker"> 
  <meta property="og:description" content="org.springframework.web.socket.config.annotation.EnableWebSocketMessageBroker"> 
  <meta property="og:image" content="https://jvmexamples.com/img/jvm-examples-com-image.png"> <!-- twitter --> 
  <meta name="twitter:card" content="summary"> 
  <meta name="twitter:site" content="jvmExamples.com"> 
  <meta name="twitter:title" content="jvmExamples.com - org.springframework.web.socket.config.annotation.EnableWebSocketMessageBroker"> 
  <meta name="twitter:description" content="org.springframework.web.socket.config.annotation.EnableWebSocketMessageBroker"> 
  <meta name="twitter:image" content="https://jvmexamples.com/img/jvm-examples-com-image.png"> <!-- Google analytics --> 
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-EKTBKHX64B"></script> 
  <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-EKTBKHX64B');
    </script> <!-- Google ad sense --> 
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1473157258033791" crossorigin="anonymous">
    </script> 
  <style>
        @font-face { font-family: "Roboto";src: url('/font/Roboto.ttf')}
        @font-face { font-family: "Roboto";
            src: url('/font/Roboto-Regular.ttf')
        }
    </style> 
 </head> 
 <body> 
  <header> 
   <div class="top_header"> 
    <nav class="navbar navbar-expand-lg navbar-light "> 
     <div class="container"> <a href="/" class="navbar_logo"><img src="/img/jvm-examples-com-logo.png" alt="logo" width="170" height="26"></a> <button id="mySidenav" type="button" class="navbar-toggler" data-bs-toggle="collapse" data-bs-target="#navbarCollapse"> <span class="navbar-toggler-icon"></span> </button> 
      <div class="collapse navbar-collapse" id="navbarCollapse"> 
       <div class="navbar-nav"> <a href="/articles/Java/Java-Language-Fundamentals/" class="nav-item nav-link active">Fundamentals</a> <a href="/articles/Java/Collections-And-Data-Structures/" class="nav-item nav-link active">Collections</a> <a href="/articles/Java/Popular-Java-Classes/" class="nav-item nav-link active">Popular</a> <a href="/articles/Java/File-And-IO/" class="nav-item nav-link active">IO</a> <a href="/articles/Java/Java-Zip/" class="nav-item nav-link active">Compression</a> <a href="/articles/Java/Swing/" class="nav-item nav-link active">Swing</a> <a href="/articles/Java/Wrapper-Classes/" class="nav-item nav-link active">Wrappers</a> <a href="/articles/Java/Applets-And-AWT/" class="nav-item nav-link active">AWT</a> <a href="/articles/Java/Miscellaneous-Classes/" class="nav-item nav-link active">Misc</a> <a href="/articles/Java/Popular-classes/" class="nav-item nav-link active">Classes</a> 
       </div> 
      </div> 
      <div class="search_box"> <button onclick="myFunction()" class="dropbtn"><i class="fa fa-search"></i></button> 
       <div id="myDropdown" class="dropdown-content"> 
        <input type="text" placeholder="Type here to search..." id="myInput" onkeyup="filterFunction()"> 
       </div> 
      </div> 
     </div> 
    </nav> 
   </div> 
  </header> 
  <div id="home_page"> 
   <div class="container"> 
    <div class="home_contant"> 
     <div class="row"> 
      <div class="col-sm-12 col-lg-9 mt-5"> 
       <div class="applet_cycle_page"> 
        <div>
         <small>2023-05-08</small>
        </div> 
        <h1>EnableWebSocketMessageBroker: Overview and Examples</h1> 
        <p>The EnableWebSocketMessageBroker annotation enables a WebSocket Message Broker and is an important part of the Spring Framework in Java. It enables communication between the application layer and the messaging layer, enabling an efficient real-time exchange of data. The purpose of this annotation is to programmatically configure the message broker to enable messaging over WebSockets.</p> 
        <h2>Annotation Overview</h2> 
        <p>This annotation is a specialization of @EnableWebSocket and it picks up all the default settings from @EnableWebSocket and, therefore, applies that configuration when this annotation is used in a configuration class. It takes an array of String values as argument that contains base paths which the WebSocket message broker uses for the mapping of incoming messages.</p> 
        <pre><code class="language-clike language-java line-numbers normalize-whitespace">
          <xmp>
           
@EnableWebSocketMessageBroker
public class WsMessageBrokerConfiguration {
  private static final String[] DEST_PREFIXES = {"/app"};

  @Bean
  public WebSocketMessageBrokerConfigurer wsMessageBrokerConfigurer() {
    return new WebSocketMessageBrokerConfigurer() {
      @Override
      public void configureMessageBroker(MessageBrokerRegistry config) {
        config.enableSimpleBroker("/queue", "/topic");
        config.setApplicationDestinationPrefixes(DEST_PREFIXES);
      }
    };
  }
}

          </xmp></code></pre> 
        <p>The above configuration defines two message brokers: one for queues and one for topics. The destination prefixes define the routes that the message broker will use to detect incoming messages.</p> 
        <h2>Examples</h2> 
        <p>Let's look at some examples of this annotation being used in different configurations.</p> 
        <h3>Example 1: Security Configuration</h3> 
        <p>In this example, the EnableWebSocketMessageBroker annotation is used to configure a security mechanism so that only authenticated users can receive messages from the message broker.</p> 
        <pre><code class="language-clike language-java line-numbers normalize-whitespace">
          <xmp>
           
@Configuration
@EnableWebSocketMessageBroker
public class SecurityConfiguration {
  @Override
  public void configureMessageBroker(MessageBrokerRegistry registry) {
    registry.enableSimpleBroker("/queue", "/topic")
            .setUserDestinationBroadcast("/topic/messages/{user}");
  }

  @Override
  public void configureClientInboundChannel (ChannelRegistration registration) {
    registration.interceptors(new ChannelInterceptorAdapter() {
      @Override
      public Message<!--?--> preSend(Message<!--?--> message, MessageChannel channel) {
        StompHeaderAccessor stompHeaderAccessor = MessageHeaderAccessor.getAccessor(message, StompHeaderAccessor.class);
        if (stompHeaderAccessor != null) {
          String user = stompHeaderAccessor.getUser();
          if (user == null)
            throw new AccessDeniedException("No user present in stomp header");
        }
        
        return message;
      }
    });
  }
}

          </xmp></code></pre> 
        <p>In this example, we configure the message broker to only allow authenticated users to receive messages. This is done by intercepting messages and checking for the presence of an authenticated user in the stomp header. If no user is present, then an AccessDeniedException is thrown.</p> 
        <h3>Example 2: Using STOMP Messages</h3> 
        <p>In this example, the EnableWebSocketMessageBroker annotation is used to configure the message broker to send and receive STOMP messages.</p> 
        <pre><code class="language-clike language-java line-numbers normalize-whitespace">
          <xmp>
           
@Configuration
@EnableWebSocketMessageBroker
public class StompConfiguration {
  @Override
  public void configureMessageBroker(MessageBrokerRegistry registry) {
    registry.enableSimpleBroker("/queue", "/topic");
    registry.setUserDestinationBroadcast("/topic/messages/{user}");
  }

  @Override
  public void registerStompEndpoints(StompEndpointRegistry registry) {
    registry.addEndpoint("/ws")
            .setAllowedOrigins("*")
            .withSockJS();
  }
}

          </xmp></code></pre> 
        <p>In this example, we enable the message broker to send and receive the STOMP messages. We also add an endpoint and set the allowed origins to "*", which allows any origin to connect to the WebSocket. Finally, we enable SockJS which is necessary for the message broker to be able to handle messages in both directions.</p> 
        <h2>Conclusion</h2> 
        <p>The EnableWebSocketMessageBroker annotation is an important part of the Spring Framework in Java. It enables a WebSocket message broker to be configured programmatically and allows for efficient real-time communication between the application layer and the messaging layer. Examples of its usage have been provided to demonstrate how it can be used to configure a security mechanism and send and receive STOMP messages.</p> 
       </div> 
       <br> 
       <br> 
       <br> <!-- You may like --> 
       <h4>YOU MAY ALSO LIKE</h4> 
       <hr> 
       <div class="articles"> 
        <ul> 
         <li> <p> <a href="/articles/Java/Collections-And-Data-Structures/ArrayList/"> ArrayList </a> </p> <a href="/articles/Java/Collections-And-Data-Structures/ArrayList/Copy-all-elements-of-Java-ArrayList-to-an-Object-Array-Example.html">Copy all elements of Java ArrayList to an Object Array Example</a> <h6><i class="fa fa-clock-o"></i> <span>2022-06-22 </span> </h6> </li> 
         <li> <p> <a href="/articles/Java/Java-Language-Fundamentals/Convertion/"> Convertion </a> </p> <a href="/articles/Java/Java-Language-Fundamentals/Convertion/Convert-any-primitive-type-to-String.html">Convert any primitive type to String</a> <h6><i class="fa fa-clock-o"></i> <span>2023-06-11 </span> </h6> </li> 
         <li> <p> <a href="/articles/Java/Java-Language-Fundamentals/Data-types/"> Data types </a> </p> <a href="/articles/Java/Java-Language-Fundamentals/Data-types/Java-int-Example.html">Java int Example</a> <h6><i class="fa fa-clock-o"></i> <span>2022-12-29 </span> </h6> </li> 
         <li> <p> <a href="/articles/Java/Applets-And-AWT/AWT-Color/"> AWT Color </a> </p> <a href="/articles/Java/Applets-And-AWT/AWT-Color/Get-Transparency-Mode-Of-Color-Example.html">Get Transparency Mode Of Color Example</a> <h6><i class="fa fa-clock-o"></i> <span>2023-06-03 </span> </h6> </li> 
         <li> <p> <a href="/articles/Java/Java-Zip/CheckedOutputStream/"> CheckedOutputStream </a> </p> <a href="/articles/Java/Java-Zip/CheckedOutputStream/Create-Zip-File-With-Adler32-Checksum-Example.html">Create Zip File With Adler32 Checksum Example</a> <h6><i class="fa fa-clock-o"></i> <span>2023-02-25 </span> </h6> </li> 
         <li> <p> <a href="/articles/Java/Swing/JLabel/"> JLabel </a> </p> <a href="/articles/Java/Swing/JLabel/Set-Foreground-Color-of-JLabel-Example.html">Set Foreground Color of JLabel Example</a> <h6><i class="fa fa-clock-o"></i> <span>2023-06-20 </span> </h6> </li> 
         <li> <p> <a href="/articles/Java/Popular-classes/Popular-classes-10/"> Popular classes 10 </a> </p> <a href="/articles/Java/Popular-classes/Popular-classes-10/com.github.mikephil.charting.data.LineData.html">c.g.m.c.d.LineData</a> <h6><i class="fa fa-clock-o"></i> <span>2024-01-19 </span> </h6> </li> 
         <li> <p> <a href="/articles/Java/Popular-classes/Popular-classes-10/"> Popular classes 10 </a> </p> <a href="/articles/Java/Popular-classes/Popular-classes-10/org.apache.hadoop.mapred.FileSplit.html">org.apache.hadoop.mapred.FileSplit</a> <h6><i class="fa fa-clock-o"></i> <span>2022-12-05 </span> </h6> </li> 
         <li> <p> <a href="/articles/Java/Collections-And-Data-Structures/HashSet/"> HashSet </a> </p> <a href="/articles/Java/Collections-And-Data-Structures/HashSet/How-to-convert-HashSet-to-ArrayList.html">How to convert HashSet to ArrayList</a> <h6><i class="fa fa-clock-o"></i> <span>2022-01-31 </span> </h6> </li> 
         <li> <p> <a href="/articles/Java/Popular-classes/Popular-classes-7/"> Popular classes 7 </a> </p> <a href="/articles/Java/Popular-classes/Popular-classes-7/org.springframework.security.oauth2.provider.OAuth2Authentication.html">o.s.s.o.p.OAuth2Authentication</a> <h6><i class="fa fa-clock-o"></i> <span>2024-04-08 </span> </h6> </li> 
        </ul> 
       </div> <!-- Email --> 
       <section> 
        <div class="email_section"> 
         <h4>Receive LATEST Jvm Examples In Your Email</h4> 
         <p>Enter your email address below to join 1000+ fellow learners:</p> 
         <input type="email" name="email" placeholder="email address"> <a href="/index.html">subscribe</a> 
        </div> 
       </section> <!-- Display comments --> 
       <div class="comment_section"> 
        <ul> 
         <li class="comment_img"><img src="/img/093.jpg"></li> 
         <li class="comment_desc"> <h3>Victor</h3> <p><a href="#">2023-06-19 11:31</a></p> <p>thanks. This is the first sample project I checked so far</p> <h5><a href="/index.html">REPLY</a></h5> 
          <hr> </li> 
        </ul> 
        <ul class="comment_reply"> 
         <li class="comment_img"> <img src="/img/093.jpg"> </li> 
         <li class="comment_desc"> <h3>Gabriel</h3> <p><a href="#">2023-06-14 02:41</a></p> Can somebody elaborate more? <h5><a href="/index.html">REPLY</a></h5> 
          <hr> </li> 
        </ul> 
       </div> 
       <section> <!-- Add comment --> 
        <h4>ADD COMMENT</h4> 
        <hr> 
        <div class="applet_form"> <label>Comments<span class="required"></span></label> <textarea id="comment" name="comment" cols="45" rows="5" aria-required="true"></textarea> 
         <br> 
         <ul> 
          <li> <label>Name<span class="required"> *</span></label><br> <input type="text" name="name"> </li> 
          <li> <label>Email<span class="required"> *</span></label> <br> <input type="email" name="email"> </li> 
         </ul> 
         <div class="cepcha"> 
          <input type="checkbox" id="vehicle1" name="vehicle1" value="Bike"><span>I'm not a robot</span> <a href="#"><img src="/img/cepcha-logo.jpg"></a> 
         </div> 
         <br> <a class="form_btn" href="/index.html">Post comment</a> 
        </div> 
        <br> 
       </section> 
      </div> 
      <div class="col-sm-12 col-lg-3 mt-5"> 
       <div class="sidebar"> 
        <h3 class="mt-5">SEARCH EXAMPLE</h3> 
        <form>
         <input name="s" type="text" value="" placeholder="Type here to search..."> <button type="submit"><i class="fa fa-search"></i></button> 
        </form> 
        <h3 class="mt-4">POPULAR EXAMPLES</h3> 
        <ul> 
         <li> <a href="/articles/Java/Swing/JLabel/Create-JLabel-With-Image-Icon-and-Text-Example.html">Create JLabel With Image Icon and Text Example</a> </li> 
         <li> <a href="/articles/Java/Wrapper-Classes/Integer-Wrapper-Class/Convert-java-int-to-Integer-object-Example.html">Convert java int to Integer object Example</a> </li> 
         <li> <a href="/articles/Java/Popular-classes/Popular-classes-2/io.netty.channel.ChannelOption.html">io.netty.channel.ChannelOption</a> </li> 
         <li> <a href="/articles/Java/Collections-And-Data-Structures/Sorting/Java-Sort-double-Array-Example.html">Java Sort double Array Example</a> </li> 
         <li> <a href="/articles/Java/Popular-classes/Popular-classes-10/com.google.inject.multibindings.Multibinder.html">c.g.i.m.Multibinder</a> </li> 
         <li> <a href="/articles/Java/Swing/JLabel/JLabel-Set-Tooltip-Example.html">JLabel Set Tooltip Example</a> </li> 
         <li> <a href="/articles/Java/Collections-And-Data-Structures/ArrayList/ArrayList-clone-example.html">ArrayList clone example</a> </li> 
         <li> <a href="/articles/Java/Applets-And-AWT/Applet/Get-Applet-Context-Example.html">Get Applet Context Example</a> </li> 
         <li> <a href="/articles/Java/Miscellaneous-Classes/System/Get-classpath-using-System-class.html">Get classpath using System class</a> </li> 
         <li> <a href="/articles/Java/Popular-classes/Popular-classes-8/java.time.format.FormatStyle.html">java.time.format.FormatStyle</a> </li> 
        </ul> 
        <h3 class="mt-5">FACEBOOK FANS</h3> 
        <div id="fb-root"></div> 
        <script async defer crossorigin="anonymous" src="https://connect.facebook.net/pl_PL/sdk.js#xfbml=1&version=v15.0&appId=101341636586609&autoLogAppEvents=1" nonce="2hjA2MLA"></script> 
        <div class="fb-page" data-href="https://www.facebook.com/profile.php?id=100089200964004" data-tabs="timeline" data-width="" data-height="" data-small-header="true" data-adapt-container-width="true" data-hide-cover="false" data-show-facepile="true"> 
         <blockquote cite="https://www.facebook.com/profile.php?id=100089200964004" class="fb-xfbml-parse-ignore">
          <a href="https://www.facebook.com/profile.php?id=100089200964004">Jvmexamples.com</a> 
         </blockquote> 
        </div> 
        <h3 class="mt-5">RECENTLY COMMENTED EXAMPLES</h3> 
        <ul> 
         <li> <a href="/articles/Java/Collections-And-Data-Structures/ArrayList/Convert-array-to-Set-using-Arrays.html">Convert array to Set using Arrays</a> </li> 
         <li> <a href="/articles/Java/Miscellaneous-Classes/Runtime/Get-Total-Memory-of-Java-Virtual-Machine(JVM)-Example.html">Get Total Memory of Java Virtual Machine(JVM) Example</a> </li> 
         <li> <a href="/articles/Java/File-And-IO/File-And-Directory/Construct-file-path.html">Construct file path</a> </li> 
         <li> <a href="/articles/Java/Popular-classes/Popular-classes-10/com.codahale.metrics.health.HealthCheckRegistry.html">c.c.m.h.HealthCheckRegistry</a> </li> 
         <li> <a href="/articles/Java/Popular-classes/Popular-classes-4/androidx.test.InstrumentationRegistry.html">a.t.InstrumentationRegistry</a> </li> 
         <li> <a href="/articles/Java/Collections-And-Data-Structures/LinkedHashSet/How-to-get-the-first-or-last-element-from-LinkedHashSet.html">How to get the first or last element from LinkedHashSet</a> </li> 
         <li> <a href="/articles/Java/Java-Language-Fundamentals/Convertion/Convert-int-to-String.html">Convert int to String</a> </li> 
         <li> <a href="/articles/Java/Popular-classes/Popular-classes-9/android.app.job.JobInfo.html">android.app.job.JobInfo</a> </li> 
         <li> <a href="/articles/Java/Collections-And-Data-Structures/Iterator/Iterate-through-ArrayList-using-ListIterator.html">Iterate through ArrayList using ListIterator</a> </li> 
         <li> <a href="/articles/Java/Collections-And-Data-Structures/ArrayList/Convert-array-to-ArrayList.html">Convert array to ArrayList</a> </li> 
        </ul> 
       </div> 
      </div> 
     </div> 
    </div> 
   </div> 
  </div> 
  <footer class="footer"> 
   <div class="container"> 
    <p> <a href="/">Copyright © 2022. Jvm Examples</a> <a href="/privacy-policy.html">Privacy Policy</a> <a href="/terms-of-use.html">Terms of use</a> <a href="/sitemap.html">Sitemap</a> <a href="/contact.html">Contact</a> </p> 
   </div> 
  </footer>  
 
</body></html>